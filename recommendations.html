<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="css/style.css" rel="stylesheet" type="text/css">
  <!--Import Google Icon Font-->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <!--Import materialize.css-->
  <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
  <!--Let browser know website is optimized for mobile-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=Lobster&display=swap" rel="stylesheet">
  <title>Recommendations</title>
  <link href="css/recommendations.css" rel="stylesheet" type="text/css">
</head>
<body>
  <div id="content1">
    <nav>
      <div class="navigacija">
        <div class="nav-wrapper">
          <a href="index.html" class="brand-logo right"> ðŸ“– </a>
          <ul id="nav-mobile" class="left hide-on-med-and-right mob">
            <li><a href="kontakt.html">Who we are</a></li>
            <li><a href="kviz.html">Quiz</a></li>
            <li><a href="recommendations.html">Recommendations</a></li>
            <li><a href="quote.html">Quote Of The Month</a></li>
            <li><a href="gallery.html">Gallery</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <br>
    <br>
    <h1 class="naslov">Recommendations</h1>
    <br>
    <br>
    <div class="centar">
      <div class="ono">
        <p class="decotext">The books below are very educative!</p>
      </div>
    </div>

    <br><br><br>
    
    <div id="book-container" class="veliki">
    </div>
    <footer class="futer">
      <div class="foot">
        <p>2025 English Book Club.</p>
      </div>
    </footer>
  </div>

  <script src="js/script.js"></script>
  <script src="js/materialize.js"></script>
  <script src="js/materialize.min.js"></script>

  <script>
    // Function to fetch books from Google Books API
    async function fetchBooks() {
      const apiUrl = 'https://www.googleapis.com/books/v1/volumes?q=fiction&maxResults=20';
      try {
        // Fetch books from the API
        const response = await fetch(apiUrl);

        // Check if the response is successful
        if (!response.ok) {
          throw new Error(`HTTP error! Status: ${response.status}`);
        }

        // Parse the JSON data
        const data = await response.json();

        // Log the response data for debugging purposes
        console.log("API Response:", data);

        // Get books from the data
        const books = data.items;

        // Get the book container where we will insert the books
        const bookContainer = document.getElementById('book-container');

        // Check if books are available in the response
        if (books && books.length > 0) {
          // Loop through books and create HTML structure for each book
          books.forEach(book => {
            const bookCard = document.createElement('div');
            bookCard.classList.add('card', 'small');  // Use Materialize's card class

            // Create a card with book details
            const bookCover = book.volumeInfo.imageLinks ? book.volumeInfo.imageLinks.thumbnail : 'https://via.placeholder.com/150';
            const bookTitle = book.volumeInfo.title;
            const bookDescription = book.volumeInfo.description ? book.volumeInfo.description : 'No description available.';

            bookCard.innerHTML = `
              <div class="card-image">
                <img src="${bookCover}" alt="${bookTitle}">
              </div>
              <div class="card-content">
                <span class="card-title">${bookTitle}</span>
              </div>
              <div class="card-description">
                <p>${bookDescription}</p>
              </div>
            `;

            // Add event listener to toggle between title/image and description
            bookCard.addEventListener('click', function () {
              const image = bookCard.querySelector('.card-image');
              const title = bookCard.querySelector('.card-title');
              const description = bookCard.querySelector('.card-description');

              // Toggle the display of title/image and description
              if (description.style.display === 'none' || description.style.display === '') {
                image.style.display = 'none';  // Hide image
                title.style.display = 'none';  // Hide title
                description.style.display = 'block';  // Show description
              } else {
                image.style.display = 'block';  // Show image
                title.style.display = 'block';  // Show title
                description.style.display = 'none';  // Hide description
              }
            });

            // Append each book card to the container
            bookContainer.appendChild(bookCard);
          });
        } else {
          console.error('No books found in the API response.');
        }
      } catch (error) {
        console.error('Error fetching books:', error);
      }
    }

    // Ensure the DOM is fully loaded before running the fetchBooks function
    window.onload = function () {
      fetchBooks();
    };
  </script>
  
</body>
</html>
